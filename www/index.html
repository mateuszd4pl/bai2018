<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <script src="cordova.js"></script>
    <script src="js/angular.js"></script>
    <script src="js/angular-route.js"></script>
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css"/>
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
    <script src="js/pgb.js"></script>
    <script src="js/firebase.js"></script>
</head>
<body ng-app="MeetApp" ng-controller="controller" onload="init()">
Aktualna grupa: {{currentGroup}}
<input ng-model="otherUser.mail">
<button ng-click="addUser()">Dodaj usera</button>
<input ng-model="otherGroup.name">
<button ng-click="addGroupAndAssignUser()">Dodaj grupe</button>
<table>
    <thead>
    <tr>
        Grupy użytkownika {{currentUser.mail}}
    </tr>
    <tr>
        <th>Nazwa grupy</th>
        <th>ID grupy</th>
        <th>L. członków</th>
        <th>L. wiadomości</th>
        <th>L. wydarzem</th>
        <th>Wybierz grupę</th>
        <th>Dodaj członka</th>
    </tr>
    </thead>
    <tbody>
        <tr ng-repeat="group in currentUser.groups">
            <td>{{group.name}}</td>
            <td>{{group.key}}</td>
            <td>{{group.members.length}}</td>
            <td>{{group.events.length}}</td>
            <td>{{group.chat.length}}</td>
            <td><button ng-click="changeGroup(group.key)">Wybierz</button></td>
            <td><input ng-model="otherUser.mail"><button ng-click="addUserToGroup(otherUser, group).then(clearOtherUser())">Dodaj</button></td>
        </tr>
    </tbody>
</table>
<input ng-model="currentMessage.content">
<button ng-click="sendMessage()">Wyslij</button>
<div ng-repeat="message in currentGroup.chat">{{message.author}} napisał[{{message.time}}]: {{message.content}}<hr></div>
</body>
<script>
    const config = {
        apiKey: "AIzaSyAuvAZqxZvsINf-phvCmvfkdMwiDGO9WyE",
        authDomain: "bai18-a647f.firebaseapp.com",
        databaseURL: "https://bai18-a647f.firebaseio.com",
        projectId: "bai18-a647f",
        storageBucket: "",
        messagingSenderId: "59249875291"
    };
    firebase.initializeApp(config);
</script>
</html>
